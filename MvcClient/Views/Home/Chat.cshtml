
@{
    ViewBag.Title = "Chat";
}


<input id="Username" type="hidden" data-value="@ViewBag.Username" />
<input id="hdId" type="hidden" />
<input id="ColorOfName" type="hidden" />

<div class="container">
    <div class="row clearfix">
        <div class="col-lg-12">
            <div class="card chat-app">
                <div id="chatusers" class="people-list">
                    <div class="input-group">
                        Users online:
                    </div>
                    <ul data-bind="foreach: users">
                        <li>
                            <p data-bind="text: name"></p>
                        </li>
                    </ul>
                </div>
                <div class="chat">
                    <div class="chat-header clearfix">
                        Welcome to our chat, @ViewBag.Username
                        <div id="clearTheHistory" class="btn btn-danger" style="position: absolute; right: 0; margin-bottom:10px; margin-right:10px;">Clear the history</div>
                    </div>
                    <div id="header"></div>
                    <div class="chat-history">
                        <ul id="chatContent" class="m-b-0">
                        </ul>
                        <div class="wrapper_Scrollbottom"></div>
                    </div>
                    <div class="chat-message clearfix">
                        <div class="input-group mb-0">
                            <input id="message"
                                   type="text"
                                   class="form-control"
                                   placeholder="Enter text here..." />
                            <button id="sendmessage" type="submit" class="btn-success">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.4.0.js"></script>
<script>
    function UserViewModel() {
        var self = this;

        self.users = ko.observableArray();

        self.addUser = function (Name) {
            self.users.push({
                name: Name
            });
        }

        self.removeUser = function (Name) {
            self.users.remove(function (user) {
                return user.name == Name;
            });
        }
        self.indexOfUser = function (Name) {
            return self.users.indexOf(Name);
        }
    }

    users = new UserViewModel();
    ko.applyBindings(users);
</script>

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<!--Ссылка на библиотеку SignalR -->
<script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
<!--Ссылка на автоматически сгенерированный скрипт хаба SignalR -->
<script src="~/signalr/hubs"></script>
<script src="~/Scripts/util.js"></script>

